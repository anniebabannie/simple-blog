---
import Post from '../components/Post.astro';
import Layout from '../layouts/Layout.astro';
import { supabase } from '../lib/supabase';

const { data: posts, error } = await supabase.from('posts').select();
console.log('posts', posts);
if (error) console.error('error', error);
---

<Layout title="My Cool Blog">
	<header class="text-center bg-[url(/images/dog-biscuits.webp)] bg-center bg-cover flex flex-col gap-8 py-40">
		<h1 class="text-7xl font-bold">The Dog Blog</h1>
		<p>Learn tips and tricks about dog ownership and training.</p>
	</header>
	<main class="mx-auto container">
		<div class="grid grid-col gap-20 py-20 px-10 grid-cols-1 sm:grid-cols-2">
			{posts?.map((p => 
				<Post post={p} />
			))}
			{posts?.length === 0 &&
			<p>No posts (yet).</p>
			}
		</div>
	</main>
</Layout>